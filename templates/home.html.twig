<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Function Lifespan Visualizer{% endblock %}</title>
    {% block stylesheets %}
        <link rel="stylesheet" type="text/css" href="css/home.css">
    {% endblock %}
</head>
<body>
{% block body %}

    <div>
        <h2>Function Lifespan Visualization</h2>
    </div>
    <div class="filter">
        <div class="filter-left">
            <form id="filter_by_file" action="/" method="post" enctype="multipart/form-data">
                <p>View function lifespan for files:</p>
                <select multiple class="form-control" id="files">
                    {% for file in files %}
                        <option value="{{file.getName()}}">{{file.getName()}}</option>
                    {% endfor %}
                </select>
                <input type="submit" name="filter_by_file_button" value="Filter by File">
            </form>
        </div>

        <div class="filter-right">
            <form id="filter_by_date" action="/" method="post" enctype="multipart/form-data">
                <p>View function lifespan between dates:</p>
                <div class="filter-date-from">
                    From: <br>
                    <select class="form-control" id="files">
                        {% for date in dates %}
                            <option value="{{date}}">{{date}}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="filter-date-to">
                    To: <br>
                    <select class="form-control" id="files">
                        {% for date in dates %}
                            <option value="{{date}}">{{date}}</option>
                        {% endfor %}
                    </select>
                </div>
                <input type="submit" name="filter_by_date_button" value="Filter by Dates">

            </form>
        </div>
    </div>



{% endblock %}

{% block javascripts %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

    <div class="chart">
        <canvas id="bubble-chart" width="500" height="200" style="padding-right: 20px"></canvas>
        <script>
            var timeFormat = 'YYY-MM-DD';
            new Chart(document.getElementById("bubble-chart"), {
                type: 'bubble',
                data: {
                    labels: "Functions",
                    datasets: [
                        {
                            label: ["Function A"],
                            backgroundColor: "rgba(255,221,50,0.2)",
                            borderColor: "rgba(255,221,50,1)",
                            data: [{
                                x: moment("2018-10-01").format(timeFormat),
                                y: 1,
                                r: 15
                            },
                            {
                                x: moment("2018-10-02").format(timeFormat),
                                y: 1,
                                r: 20
                            },
                            {
                                x: moment("2018-10-05").format(timeFormat),
                                y: 1,
                                r: 13
                            }]
                        }, {
                            label: ["Function B"],
                            backgroundColor: "rgba(60,186,159,0.2)",
                            borderColor: "rgba(60,186,159,1)",
                            data: [{
                                x: moment("2018-10-01").format(timeFormat),
                                y: 2,
                                r: 10
                            }, {
                                x: moment("2018-10-05").format(timeFormat),
                                y: 2,
                                r: 25
                            }]
                        }, {
                            label: ["Function C"],
                            backgroundColor: "rgba(0,0,0,0.2)",
                            borderColor: "#000",
                            data: [{
                                x: moment("2018-10-02").format(timeFormat),
                                y: 3,
                                r: 15
                            }]
                        }, {
                            label: ["Function D"],
                            backgroundColor: "rgba(193,46,12,0.2)",
                            borderColor: "rgba(193,46,12,1)",
                            data: [{
                                x: moment("2018-10-03").format(timeFormat),
                                y: 4,
                                r: 15
                            },{
                                x: moment("2018-10-05").format(timeFormat),
                                y: 4,
                                r: 20
                            },{
                                x: moment("2018-10-10").format(timeFormat),
                                y: 4,
                                r: 30
                            }]
                        }
                    ]
                },
                options: {
                    title: {
                        display: true,
                        text: 'Function Lifespan Visualization'
                    }, scales: {
                        yAxes: [{
                            scaleLabel: {
                                display: true,
                                labelString: "Functions"
                            },
                            ticks: {
                                min: 0,
                                max: 5,
                                stepSize: 1
                            }
                        }],
                        xAxes: [{
                            type: 'time',
                            time: {
                                format: timeFormat,
                                unit: 'day',
                                tooltipFormat: 'll',
                                max: moment("2018-10-10").format(timeFormat)
                            },
                            scaleLabel: {
                                display: true,
                                labelString: "Time"
                            },
                            gridLines: {
                                display: false
                            }
                        }]
                    }
                }
            });
        </script>
    </div>

{% endblock %}
</body>
</html>
